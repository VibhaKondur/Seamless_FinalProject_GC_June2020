@model List<Record>

<link href="~/css/favorites.css" rel="stylesheet" />

<h1 style=" text-align:center">Favorites</h1>
<br>
<br>
<div id="mySidebar" class="sidebar ">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <a> Welcome, </a>
    <a>@ViewBag.AspUser.Email</a>
    <ul>
        <li> <a href="/Home/UserProfile?name=" @ViewBag.User.Id ">Your Profile</a></li>
        <li><a href="/SeamedInDB/Favorites">Your Favorites</a></li>
        <li> <a href="/SeamedInDB/SearchPage">Search Page</a></li>
    </ul>
    <a>Recommended Startups:</a>
    <ul>
        @for (int i = 0; i < 3; i++)
        {
            <li><a href="/Home/StartupProfile?name=@ViewBag.Startups[i].Startup.fields.CompanyName">@ViewBag.Startups[i].Startup.fields.CompanyName</a></li>
        }
    </ul>
</div>


<div class="main">

    @if (Model.Count == 0)
    {

        //If favorites list is empty, direct user back to search page to search StartUps to add to Favorites List
        <h5 style="text-align: center">
            <p class="text-danger">Your list of favorite StartUps is empty. Please return to Search Page to search StartUps</p>
        </h5>
        <h5 style="text-align: center">
            <button onclick="document.location = '/SeamedInDB/SearchPage?id=@Model'">Search for Startups</button>
        </h5>
    }

    else
    {
        <h5 style="text-align: center">
            <button onclick="document.location = '/SeamedInDB/SearchPage?id=@Model'">Search for more Startups</button>
        </h5>
        <br>
        <br>
        <h5 style="text-align: center">
            <button onclick="document.location = '/Home/SearchResultsGlobal?id=@Model'">Back to Search Results</button>
        </h5>
        <br>
        <br>
        <h5 style="text-align: center">
            <a href="~/SeamedInDB/ClearFavoritesView?id=@Model" id="deleteBtn" class="btn bg-danger mr-1"
               onclick="return confirm('Are you sure you want to remove all StartUps from your Favorites List?');">
                <i class="fas fa-trash-alt text-white"></i>Clear Favorites List
            </a>
        </h5>

    }

    <div class="flex">

        <div class="flex-item">

            @foreach (Record favoriteStartUp in Model)
            {

                @if (ViewBag.id == true)
                {

                    <div class="alert alert-warning alert-dismissible">
                        <a href="~/SeamedInDB/AddAFavoriteStartUpToList?id=@favoriteStartUp.id" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                        <strong>Duplicate Startup detected!</strong>This Startup has already been added to your Favorites List. Please return to search more Startups.
                    </div>

                }
                else
                {


                    @if (favoriteStartUp.fields.CompanyName == null)
                    {
                        <h5>Startup Name not available</h5>
                    }
                    else
                    {
                        @*<h5>Company: ><a href="/Home/StartupProfile?name=@favoriteStartUp.fields.CompanyName"></a></h5>*@
                        <h5>
                            <a href="@Url.Action("StartUpProfile", "Home", new {name = @favoriteStartUp.fields.CompanyName})">@favoriteStartUp.fields.CompanyName</a>
                        </h5>
                    }
                    @if (favoriteStartUp.fields.City == null)
                    {
                        <h5>City not available</h5>
                    }
                    else
                    {
                        <h5>City: @favoriteStartUp.fields.City</h5>
                    }
                    @if (favoriteStartUp.fields.StateProvince == null)
                    {
                        <h5>State and/or Province not available</h5>
                    }
                    else
                    {
                        <h5>State or Province: @favoriteStartUp.fields.StateProvince</h5>
                    }
                    @if (favoriteStartUp.fields.Country == null)
                    {
                        <h5>Country not available</h5>
                    }
                    else
                    {
                        <h5>Country: @favoriteStartUp.fields.Country</h5>
                    }

                    <div class="form-group">
                        <label for="comment">Add a Comment</label>
                        <textarea class="form-control" rows="5" id="comment"></textarea>
                        <button type="submit" class="btn btn-default">Submit</button>
                    </div>

                    <a href="~/SeamedInDB/RemoveAFavoriteStartUpFromList?id=@favoriteStartUp.id" id="deleteBtn" class="btn bg-danger mr-1"
                       onclick="return confirm('Are you sure you want to remove this Startup from your Favorites List?');">
                        <i class="fas fa-trash-alt text-white"></i>Remove Startup from Favorites List
                    </a>

                }

             }

            <br><br><br><br>
        </div>

    </div>

</div>

